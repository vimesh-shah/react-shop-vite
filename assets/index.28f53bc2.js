var j=Object.defineProperty,B=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var f=(r,n,s)=>n in r?j(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s,b=(r,n)=>{for(var s in n||(n={}))N.call(n,s)&&f(r,s,n[s]);if(h)for(var s of h(n))L.call(n,s)&&f(r,s,n[s]);return r},w=(r,n)=>B(r,A(n));var x=(r,n)=>{var s={};for(var i in r)N.call(r,i)&&n.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&h)for(var i of h(r))n.indexOf(i)<0&&L.call(r,i)&&(s[i]=r[i]);return s};import{j as z,R,r as p,u as O,a as k,c as E,b as y,F as C,d as I,e as U,L as $,N as q,O as H,B as M,f as V,g as d,h as D}from"./vendor.0c16ce12.js";const K=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};K();const e=z.exports.jsx,t=z.exports.jsxs,W=()=>e("div",{children:"Home"});var G="/react-shop-vite/assets/burger.417e7b05.jpg",J="/react-shop-vite/assets/pizza.b9788ec0.jpg";const F=R.createContext(null),Q=({children:r})=>{const[n,s]=p.exports.useState(null),i=O(),o=k(),a=o.pathname==="/login"?"/":o.pathname,l=({username:c,password:m})=>c==="vimesh"&&m==="123"?(s({username:c,role:"admin"}),i(a,{replace:!0}),!0):c==="disha"&&m==="123"?(s({username:c,role:"normal"}),i(a,{replace:!0}),!0):(s(null),!1),u=()=>{s(null),i("/login")};return e(F.Provider,{value:{user:n,login:l,logout:u},children:r})},g=()=>p.exports.useContext(F);const T=({onLogin:r})=>{const n=E({username:y().required("Please Enter Username."),password:y().required("Please Enter Password.")});return t("div",{className:"form-container",children:[e("div",{className:"form-header",children:"Log In"}),e(C,{initialValues:{username:"",password:""},onSubmit:(i,{setSubmitting:o})=>{o(!1),r(i)},validationSchema:n,children:({values:i,errors:o,touched:a,isSubmitting:l,handleChange:u,handleBlur:c,handleSubmit:m})=>t("form",{onSubmit:m,children:[t("div",{className:"form-control",children:[e("div",{children:e("label",{htmlFor:"username",children:"Username"})}),e("div",{children:e("input",{type:"text",id:"username",name:"username",value:i.username,onChange:u,onBlur:c})}),e("div",{className:"error",children:o.username&&a.username&&e("span",{children:o.username})})]}),t("div",{className:"form-control",children:[e("div",{children:e("label",{htmlFor:"password",children:"Password"})}),e("div",{children:e("input",{type:"password",id:"password",name:"password",value:i.password,onChange:u,onBlur:c})}),e("div",{className:"error",children:o.password&&a.password&&e("span",{children:o.password})})]}),e("div",{className:"form-control",children:e("button",{type:"submit",disabled:l,children:"Login"})})]})})]})};const S=()=>{const r=g(),[n,s]=p.exports.useState(!1);return t("div",{className:"login-container",children:[t("div",{className:"login-info",children:[t("div",{className:"login-header",children:["Welcome to world's best",e("br",{}),"Burger & Pizza Shop"]}),t("div",{className:"login-image-container",children:[e("div",{children:e("img",{className:"login-image",alt:"Burger",src:J})}),e("div",{children:e("img",{className:"login-image",alt:"Pizza",src:G})})]})]}),e("div",{className:"login-form",children:e(T,{onLogin:o=>{const a=r==null?void 0:r.login(o);a===!1&&s(!a)}})})]})},X=()=>e("div",{children:"Profile"}),Y=()=>e("div",{children:"Unauthorized"}),v=i=>{var o=i,{children:r,to:n}=o,s=x(o,["children","to"]);const a=I(n),l=U({path:a.pathname,end:!0});return e($,w(b({to:n,className:l?"active":""},s),{children:r}))};const Z=()=>{const r=g(),n=()=>{r==null||r.logout()};return t("nav",{className:"nav-bar",children:[t("div",{className:"nav-block",children:[e("div",{className:"nav-logo",children:"\u{1F354} \u{1F355}"}),e("div",{className:"nav-link",children:e(v,{to:"/",children:"Home"})}),e("div",{className:"nav-link",children:e(v,{to:"/profile",children:"Profile"})})]}),e("div",{className:"nav-block",children:t("div",{className:"nav-link",children:[(r==null?void 0:r.user)&&t("span",{className:"nav-username",children:["Hi ",r.user.username]}),(r==null?void 0:r.user)!==null?e("a",{onClick:n,children:"Logout"}):e(v,{to:"/login",children:"Login"})]})})]})},P=({allowedRoles:r})=>{var o,a;const n=g(),s=k();if((n==null?void 0:n.user)===null)return e(S,{});let i=(a=(o=n==null?void 0:n.user)==null?void 0:o.role)!=null?a:"";return r.includes(i)?e(H,{}):e(q,{to:"/unauthorized",state:{from:s},replace:!0})},_=()=>e(M,{children:t(Q,{children:[e(Z,{}),e("div",{className:"container",children:t(V,{children:[e(d,{element:e(P,{allowedRoles:["admin","normal"]}),children:e(d,{path:"/",element:e(W,{})})}),e(d,{element:e(P,{allowedRoles:["admin"]}),children:e(d,{path:"profile",element:e(X,{})})}),e(d,{path:"login",element:e(S,{})}),e(d,{path:"unauthorized",element:e(Y,{})})]})})]})});D.render(e(R.StrictMode,{children:e(_,{})}),document.getElementById("root"));
